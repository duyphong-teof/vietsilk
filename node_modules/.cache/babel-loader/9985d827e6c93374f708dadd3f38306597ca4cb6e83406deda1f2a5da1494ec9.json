{"ast":null,"code":"var _jsxFileName = \"D:\\\\NodeJs-ReactJs\\\\vietsilk-app\\\\src\\\\frontend\\\\wishlist.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport EmptyWishlist from './EmptyWishlist'; // Đây là component bạn dùng để hiển thị khi trống\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WishlistPage = () => {\n  _s();\n  const [favoriteIds, setFavoriteIds] = useState([]);\n  const [favoriteProducts, setFavoriteProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Lấy danh sách id yêu thích từ localStorage khi component mount\n  useEffect(() => {\n    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n    setFavoriteIds(favorites);\n  }, []);\n\n  // Khi favoriteIds thay đổi, gọi API để lấy thông tin sản phẩm\n  useEffect(() => {\n    if (favoriteIds.length === 0) {\n      setFavoriteProducts([]);\n      setLoading(false);\n      return;\n    }\n    const fetchProducts = async () => {\n      setLoading(true);\n      try {\n        // Giả sử API hỗ trợ lấy nhiều sản phẩm theo danh sách id (nếu không, bạn có thể lặp fetch từng sản phẩm)\n        const responses = await Promise.all(favoriteIds.map(id => fetch(`http://localhost:5000/api/products/${id}`)));\n        const products = await Promise.all(responses.map(res => res.json()));\n        setFavoriteProducts(products);\n      } catch (error) {\n        console.error('Failed to fetch favorite products:', error);\n        setFavoriteProducts([]);\n      }\n      setLoading(false);\n    };\n    fetchProducts();\n  }, [favoriteIds]);\n  const handleRemove = id => {\n    const updatedFavorites = favoriteIds.filter(favId => favId !== id);\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n    setFavoriteIds(updatedFavorites);\n  };\n  const handleContinueShopping = () => {\n    window.location.href = '/products';\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center my-20 text-gray-500\",\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pb-10\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), favoriteProducts.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyWishlist, {\n      onContinue: handleContinueShopping\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto px-8 py-12\",\n      children: favoriteProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between border-b border-gray-300 py-4 space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `/images/${product.gioiTinh === 'Nữ' ? 'Women' : 'Men'}/${product.hinhAnh[0].split(',')[0].trim()}`,\n            alt: product.tenSanPham,\n            className: \"w-20 h-20 object-cover rounded\",\n            onError: e => e.currentTarget.src = '/images/default-image.jpg'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: product.tenSanPham\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: [product.gia.toLocaleString('vi-VN'), \" VND\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-end space-y-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRemove(product._id || product.id),\n            className: \"text-red-600 hover:text-red-800 font-semibold\",\n            children: \"X\\xF3a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)]\n      }, product._id || product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(WishlistPage, \"V0n59r9oQDxeDrYDpqb5/7NcAno=\");\n_c = WishlistPage;\nexport default WishlistPage;\nvar _c;\n$RefreshReg$(_c, \"WishlistPage\");","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","EmptyWishlist","jsxDEV","_jsxDEV","Fragment","_Fragment","WishlistPage","_s","favoriteIds","setFavoriteIds","favoriteProducts","setFavoriteProducts","loading","setLoading","favorites","JSON","parse","localStorage","getItem","length","fetchProducts","responses","Promise","all","map","id","fetch","products","res","json","error","console","handleRemove","updatedFavorites","filter","favId","setItem","stringify","handleContinueShopping","window","location","href","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onContinue","product","src","gioiTinh","hinhAnh","split","trim","alt","tenSanPham","onError","e","currentTarget","gia","toLocaleString","onClick","_id","_c","$RefreshReg$"],"sources":["D:/NodeJs-ReactJs/vietsilk-app/src/frontend/wishlist.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport EmptyWishlist from './EmptyWishlist'; // Đây là component bạn dùng để hiển thị khi trống\r\n\r\nconst WishlistPage = () => {\r\n  const [favoriteIds, setFavoriteIds] = useState([]);\r\n  const [favoriteProducts, setFavoriteProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Lấy danh sách id yêu thích từ localStorage khi component mount\r\n  useEffect(() => {\r\n    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\r\n    setFavoriteIds(favorites);\r\n  }, []);\r\n\r\n  // Khi favoriteIds thay đổi, gọi API để lấy thông tin sản phẩm\r\n  useEffect(() => {\r\n    if (favoriteIds.length === 0) {\r\n      setFavoriteProducts([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Giả sử API hỗ trợ lấy nhiều sản phẩm theo danh sách id (nếu không, bạn có thể lặp fetch từng sản phẩm)\r\n        const responses = await Promise.all(\r\n          favoriteIds.map(id => fetch(`http://localhost:5000/api/products/${id}`))\r\n        );\r\n        const products = await Promise.all(responses.map(res => res.json()));\r\n        setFavoriteProducts(products);\r\n      } catch (error) {\r\n        console.error('Failed to fetch favorite products:', error);\r\n        setFavoriteProducts([]);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [favoriteIds]);\r\n\r\n  const handleRemove = (id) => {\r\n    const updatedFavorites = favoriteIds.filter(favId => favId !== id);\r\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\r\n    setFavoriteIds(updatedFavorites);\r\n  };\r\n\r\n  const handleContinueShopping = () => {\r\n    window.location.href = '/products';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <>\r\n        <Header />\r\n        <p className=\"text-center my-20 text-gray-500\">Đang tải...</p>\r\n        <Footer />\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"pb-10\">\r\n      <Header />\r\n\r\n      {favoriteProducts.length === 0 ? (\r\n        <EmptyWishlist onContinue={handleContinueShopping} />\r\n      ) : (\r\n        <div className=\"max-w-5xl mx-auto px-8 py-12\">\r\n          {favoriteProducts.map(product => (\r\n            <div\r\n              key={product._id || product.id}\r\n              className=\"flex items-center justify-between border-b border-gray-300 py-4 space-x-4\"\r\n            >\r\n              <div className=\"flex items-center space-x-4\">\r\n                <img\r\n                  src={`/images/${product.gioiTinh === 'Nữ' ? 'Women' : 'Men'}/${product.hinhAnh[0].split(',')[0].trim()}`}\r\n                  alt={product.tenSanPham}\r\n                  className=\"w-20 h-20 object-cover rounded\"\r\n                  onError={e => (e.currentTarget.src = '/images/default-image.jpg')}\r\n                />\r\n                <div>\r\n                  <p className=\"font-semibold\">{product.tenSanPham}</p>\r\n                  <p className=\"text-gray-600\">{product.gia.toLocaleString('vi-VN')} VND</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col items-end space-y-2\">\r\n                <button\r\n                  onClick={() => handleRemove(product._id || product.id)}\r\n                  className=\"text-red-600 hover:text-red-800 font-semibold\"\r\n                >\r\n                  Xóa\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WishlistPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}